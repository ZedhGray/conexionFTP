# Mi AplicaciÃ³n ConexionFTP

[![VersiÃ³n](2.0)]

"Establece una conexiÃ³n SFTP segura usando Paramiko"

## CaracterÃ­sticas principales

El script hace lo siguiente:

- Establece una conexiÃ³n SFTP segura usando **Paramiko**
- Sube recursivamente todos los archivos y carpetas desde la carpeta local especificada
- Mantiene la misma estructura de directorios en el servidor SFTP
- Registra todas las operaciones y errores en archivos de log
- Genera reportes estadÃ­sticos en formato JSON
- Cierra la conexiÃ³n de manera segura

CaracterÃ­sticas importantes:

- âœ… Manejo de errores robusto
- âœ… Logging detallado de operaciones
- âœ… CreaciÃ³n automÃ¡tica de directorios en el servidor SFTP
- âœ… Soporte para subdirectorios
- âœ… ConfiguraciÃ³n directa en el cÃ³digo (no requiere archivos .env)
- âœ… Preserva tiempos de modificaciÃ³n de archivos

## Pre-requisitos

- Python 3.8 o superior (recomendado Python 3.12.7)

## InstalaciÃ³n

### 1. Instalar Python

Instala Python en la versiÃ³n requerida si aÃºn no lo tienes instalado.

- Recuerda darle permisos de administrador
- Marca ambas casillas en la instalaciÃ³n (recomendaciÃ³n: "Add Python to PATH" y "Install for all users")

### 2. Instalar Paramiko

Abre la consola de comandos (CMD o PowerShell) y ejecuta:

```bash
pip install paramiko
```

Esto instalarÃ¡ Paramiko directamente en tu sistema.

**Nota:** Si pip muestra un mensaje sugiriendo actualizar, puedes hacerlo con:

```bash
python -m pip install --upgrade pip
```

## ConfiguraciÃ³n

**Antes de ejecutar el programa**, abre el archivo `connectionFTP.py` y edita la secciÃ³n de configuraciÃ³n (lÃ­neas 10-17):

```python
SFTP_CONFIG = {
    'SFTP_HOST': 'ftp.sistemaicom.com',        # Tu servidor SFTP
    'SFTP_USER': 'sisicom',                     # Tu usuario
    'SFTP_PASS': 'tu_contraseÃ±a_aqui',          # Tu contraseÃ±a
    'SFTP_PORT': 223,                           # Puerto (normalmente 22 para SFTP)
    'LOCAL_FOLDER': 'C:/ruta/a/tu/carpeta',     # Carpeta local a subir
    'REMOTE_FOLDER': '/ruta/en/el/servidor'     # Carpeta destino en servidor
}
```

**Importante:** Rellena tus datos reales en esta secciÃ³n antes de ejecutar.

## Uso

Ejecuta la aplicaciÃ³n con el siguiente comando:

```bash
python connectionFTP.py
```

El programa subirÃ¡ todos los archivos de tu carpeta local al servidor SFTP, manteniendo la estructura de carpetas.

## Estructura de logs

### Archivos generados automÃ¡ticamente

Se crea un directorio `logs/` automÃ¡ticamente en la primera ejecuciÃ³n.

Cada sesiÃ³n genera dos archivos:

1. **`sftp_sync_YYYYMMDD_HHMMSS.log`** - Log detallado de todas las operaciones
2. **`sync_report_YYYYMMDD_HHMMSS.json`** - Reporte estadÃ­stico en formato JSON

### InformaciÃ³n registrada

**Archivos subidos exitosamente:**

- Ruta local y remota
- TamaÃ±o en bytes
- Timestamp de subida

**Errores de subida:**

- Ruta del archivo
- Tipo de error
- Timestamp del error

**Directorios creados:**

- Ruta del directorio
- Timestamp de creaciÃ³n

**EstadÃ­sticas generales:**

- Tiempo de inicio y fin
- DuraciÃ³n total
- Contadores de Ã©xitos y errores

### Formato del log

- â° Timestamps precisos
- ğŸ“Š Niveles de log (INFO, ERROR, DEBUG)
- ğŸ“ Mensajes descriptivos
- ğŸ–¥ï¸ Salida simultÃ¡nea a archivo y consola

### Reporte JSON incluye

```json
{
  "start_time": "2025-10-24T10:30:00",
  "end_time": "2025-10-24T10:32:15",
  "duration_seconds": 135.5,
  "files_uploaded": [...],
  "files_failed": [...],
  "directories_created": [...],
  "total_files_uploaded": 45,
  "total_files_failed": 0,
  "total_directories_created": 8
}
```

### Resumen final en consola

Al terminar, verÃ¡s un resumen como este:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     RESUMEN DE SINCRONIZACIÃ“N SFTP        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ“ Archivos subidos exitosamente: 45
âœ— Archivos con errores: 0
ğŸ“ Directorios creados: 8
â± Tiempo total: 135.50 segundos
```

## Notas importantes

- El programa **NO borra** archivos del servidor, solo agrega o actualiza
- Si un archivo ya existe en el servidor, se sobrescribe con la versiÃ³n local
- Los tiempos de modificaciÃ³n de archivos se preservan
- Las conexiones se cierran automÃ¡ticamente al terminar o en caso de error

## SoluciÃ³n de problemas

**Error de conexiÃ³n:**

- Verifica que el host, puerto, usuario y contraseÃ±a sean correctos
- AsegÃºrate de tener acceso a internet
- Confirma que el puerto SFTP estÃ© abierto en el firewall

**Error "carpeta local no existe":**

- Verifica que la ruta en `LOCAL_FOLDER` exista y sea correcta
- Usa rutas absolutas (ej: `C:/Users/...`)

**Error de permisos:**

- Verifica que tengas permisos de escritura en la carpeta remota
- Confirma que tu usuario SFTP tenga los permisos necesarios

## Licencia

Derechos reservados ZedhGray
